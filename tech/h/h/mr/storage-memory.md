**Fixed disc device**

- Hard disc
    ハードディスクは、高速回転しているディスクに磁気ヘッドを使って情報を読み書きする。
    
    - 構造
        - 特徴
            
            大容量で安価、比較的高速。ほぼ全てのパソコンに搭載されている。
            
        - フォーマットと領域、データサイズ
            - フォーマット（初期化）
                
                この作業でプラッタの上にデータを記録するために領域が分割される。
                
            - HDDの領域
                
                最小単位をセクタ、セクタを一周分繋げたものをトラックと呼ぶ。
                
                中心からの距離が等しい複数のトラックを縦にまとめてシリンダという。
                
            - ハードディスクのデータサイズ
                
                $$
                \text{Data size}=\text{Number of cylinders}\times \text{Number of tracks per cylinder} \times \text{number of sectors per track} \times \text{number of bytes per sector}
                $$
                
            - OSとクラスタ
                
                OSにとっては、１セクタは小さすぎる。
                
                そこで、いくつかのセクタを「クラスタ」
                
                という最小単位にして扱う。
                
        - 構成要素
            - ディスク（プラッタ）
                
                容量に応じて1枚以上入っている。
                
                金属やガラスでできてる硬い円盤。表面に磁性体が塗布もしくは蒸着されている。磁化することで、情報を記録する。
                
            - アクセスアーム
                
                先端に磁気ヘッドが付いている。
                
                磁気ヘッドをディスク上の目的地まで運ぶ。
                
            - 磁気ヘッド
                
                アクセスアームの先端に付いている微小な電磁コイル。ディスク表面の磁性体をじかさせたり、読み取ったりする。
                
    - 読み書き手順
        1. 目的位置の同心炎上へと磁気ヘッドを運ぶ。
        2. プラッタはぐるぐる回っている。
        
        ---
        
        1. Seek: アクセスアームが目的位置までくること。アクセスアームを動かして、磁気ヘッドを目的のデータが書かれているトラック位置運び、磁気ヘッドの真下にくる。トラックが決定。
            1. これには1秒もかからないと仮定。アームの振れ幅が小さいからね。
        2. Search（目的位置）まで。トラックは決まったが、そこからディスクが回転してきて読み書きしたいセクタまで回ってくる時間。セクタが決定（完了）。
        3. Data transferation: トラックが決まって、セクタが決まったら、そこで読み書きする。読み書きは、磁気ヘッドがプラッタの磁性体を通過するだけで読み書きができる。プラッタの磁性体を磁気ヘッドで磁化させることでデータの読み書きを行う。
            1. １トラックのデータを転送するのに必要な時間：ディスクがぐるりと一回転する時間と同じ。
        
        ![Screenshot 2024-08-21 at 20.24.39.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d36be01f-c315-4c3e-890b-9b2043984cc4/20d4f2c9-6cef-4d80-bc02-40f9a7a7e734/Screenshot_2024-08-21_at_20.24.39.png)
        
        - Access time (the time it takes to access data)
            - スペック例
                
                
                | **項目** | **値** |
                | --- | --- |
                | 回転速度 | 5,000回転/分 |
                | 平均シーク時間 | 20ミリ秒 |
                | 1トラックあたりの記憶容量 | 15,000バイト |
            
            HDDのスペックと読み書きするデータのサイズが与えられたらアクセス時間が決まる。
            
            ちなみにそれを色んな確率を考慮すると、理論的には1/2週分の時間
            
            1. 最短0秒：磁気ヘッドのすぐ下にセクタがあった場合
            2. 最長1周分：ちょうど通り過ぎてしまった場合
            - seek time
                
                平均値を用いる
                
            - search time
                
                平均値を用いる
                
            - data transfer time
                
                １トラック読み書きするのに1周分
                
    - Defragmentation
        - Fragmentation
            
            As reading, writing, and deleting operations are repeated, free space on the platter becomes increasingly scattered (fragmentation), leading to decreased speed.
            
        
        Defragmentation is the process of reorganizing fragmented data into one place.⁠
        
    - RAID
        
        複数のHDDを組み合わせることで、速度や信頼性を向上させる。
        
        ディスクアレイ（一つの仮想的なHDDにして運用する技術）
        
        7種類に分かれていて、求める速度と信頼性に応じて各種類を組み合わせて使える。
        
        一般的に使われているのは、RAID0(高速化)RAID1(信頼性)RAID5(信頼性)
        
        |  | RAID0 | RAID1 | RAID2 | RAID3 | RAID4 | RAID5 | RAID6 |
        | --- | --- | --- | --- | --- | --- | --- | --- |
        | **ストライピング（データを複数のハードディスクに分散して書き込むこと）** | する | しない | する | する | する | する | する |
        | **ミラーリング（全く同じ情報を二つのハードディスクに記録する）** | しない | する | しない | しない | しない | しない | しない |
        | **ストライピングの単位** | ブロック | - | ビット | ブロック | ブロック | ブロック | ブロック |
        | **データ訂正符号** | - | - | ハミング | パリティ | パリティ | パリティ | パリティ |
        | **冗長ディスクの構成** | - | - | 固定 | 固定 | 固定 | 分散 | 分散 |
        
        RAIDはその代表的な実装手段の一つ
        
        ストライピング、その単位
        
        ミラーリング
        
        データ訂正符号
        
        冗長ディスクの構成
        
        - RAID 0 (Striping)
            
            Improves performance by spreading data across multiple disks, but offers no redundancy.
            
            複数のディスクに分散させて書く。高速だが信頼性が低い（一個のディスクが壊れたらデータが壊れる）。
            
        - RAID 1 (Mirroring)
            
            2台以上のディスクに対し常に同じデータを書き込む。使える容量は半分だが、信頼性は高い
            
            Provides data redundancy by duplicating data across two or more disks.
            
        
        ↓
        
        - RAID 10 (1+0)
            
            細かいことはよくわからんけど、とにかくRAID0とRAID1を組み合わせている。
            
            Combines mirroring and striping for both redundancy and performance improvement.
            
        
        ---
        
        - RAID 2 (実用的ではない)
            
            分散させて書き込む元データと別に、メモリなどで使用される誤り訂正符号（ECC: Error Correction Code）を冗長コードとして専用のディスクに書き込む。ディスクの利用効率が低く、代表的なECCであるハミング符号の計算も複雑で時間がかかる。
            
            - 冗長コードとは？
                
                冗長コード（Redundant Code）とは、データに余分な情報を付加することで、データ伝送や記憶媒体でのデータ保持中に発生するエラーを検出・訂正するためのコードです。これにより、元のデータが壊れてしまっても、冗長コードを利用して元の正しいデータを復元することが可能です。
                
            - ECC（Error Correction Code）とは？
                
                ECCはError Correction Codeの略で、データに発生したエラーを検出し、自動的に修正するために使用される技術です。一般的に、メモリやストレージデバイスで使用され、データの信頼性を高めます。代表的なECCの一つがハミング符号で、これはデータのビットに冗長なビットを追加して、エラーが発生した際にどのビットが誤っているかを特定し、訂正するための方法です。
                
            - 冗長コードを専用のディスクに書き込む理由
                1. **データ保護と復元性の強化**: 元のデータと冗長コードを別のディスクに保存することで、万が一、元のデータが保存されているディスクに障害が発生しても、冗長コードを使用してデータを復元することができます。
                2. **エラー分離**: 冗長コードを別のディスクに保存することで、元データと冗長コードの両方が同時に破損するリスクを減らします。これにより、データの整合性をより確実に保つことができます。
                3. **効率性の向上**: 専用ディスクを使うことで、冗長コードの計算やアクセスを効率化し、データアクセス速度を最適化することが可能です。
                
                冗長コードを専用のディスクに保存することにはデータの信頼性と保護を向上させるという重要な利点がありますが、その反面、ディスクの利用効率が低くなるというデメリットもあります。
                
            - ハミング符号とは？
                
                ハミング符号（Hamming Code）は、1950年にリチャード・ハミングによって発明された、誤り検出および訂正を行うための符号化技術です。データに冗長ビット（パリティビット）を追加することで、1ビットのエラーを自動的に検出し、訂正することができます。また、2ビットのエラーも検出可能です（ただし、訂正はできません）。
                
            - ハミング符号の仕組み
                
                ハミング符号では、データビットに加えて、いくつかのパリティビット（冗長ビット）が追加されます。これらのパリティビットは、特定のデータビットの集合に対して偶数パリティ（または奇数パリティ）を計算するために使われます。データが保存または伝送されると、受信側で同じパリティチェックが行われ、もしエラーが検出された場合、エラービットの位置が特定され、修正されます。
                
            - ハミング符号の基本的な構成:
                - **データビット (kビット)**: 元のデータを構成するビット。
                - **パリティビット (rビット)**: エラーチェックのために追加されるビット。通常、2^r >= k + r + 1 の条件を満たすように r の値が決定されます。
                
                例えば、4ビットのデータ（k=4）に対して、3つのパリティビット（r=3）を追加する場合、合計7ビットのハミング符号が得られます。
                
                - 例：7ビットのハミング符号
                    
                    元データ: `1011`（4ビット）
                    
                    このデータに対して、パリティビットを配置します:
                    
                    位置: `P1 P2 D1 P3 D2 D3 D4`
                    
                    符号: `P1 P2 1 P3 0 1 1`
                    
                    ここで、P1, P2, P3はパリティビットで、D1, D2, D3, D4はデータビットです。パリティビットはそれぞれの場所に応じて特定のデータビットをカバーし、値が設定されます。
                    
            - ハミング符号の利点
                - **1ビットエラーの訂正**: ハミング符号は1ビットのエラーを検出し、修正することができます。
                - **2ビットエラーの検出**: 2ビットのエラーは検出可能ですが、訂正はできません。
            - ハミング符号の制約
                - **計算の複雑さ**: パリティビットの計算やエラーチェックには少し複雑な手順が必要です。
                - **冗長性**: パリティビットを追加することで、データサイズが大きくなります。
                
                ハミング符号は、データ通信やメモリシステムにおいて、データの信頼性を向上させるためによく使われます。
                
        
        ↓
        
        - RAID3, 4 (実用的ではない)
            
            3台以上のディスクを使う。
            
            - 2台でストラピングをする。
            - もう1台でパリティ（誤り訂正符号）を記録する
            
            RAID3とRAID4の違いは、書き込み単位の違い。
            
            RAID3: ビット単位
            
            RAID4: ブロック単位
            
        
        ↓
        
        - RAID 5
            
            3台以上のディスクを使って、データと同時にパリティも分散させて書き込む。
            
            全てのディスクにストライピングもパリティ情報も保存する。そのため、信頼性が非常に高い（いずれか一台が故障しても、他のディスクにあるパリティ情報を使ってデータを復元できる。）
            
            Offers a balance of performance and redundancy by striping data and parity information across at least three disks.
            
        
        ↓
        
        - RAID 6
            
            RAID5を拡張して信頼性を高めたもの。
            
            パリティを2種類にし、それらを分散させて書き込む
            
            Similar to RAID 5 but with additional parity for improved fault tolerance.
            
- SSD(Solid State Drive)
    
    HDDの代替として近年注目度を増している。
    
    フラッシュメモリを記憶媒体として内蔵する。
    
    - 高速な読み書き
        
        機械的な駆動部分がないため、省電力・衝撃に強い。シークやサーチといった待ち時間もない
        
    - 完全な置き換えには至っていない
        
        ただ、書き込み回数に上限がある。また、HDDより高い
        

**Removable media**

<aside>
<img src="/icons/calculator_lightgray.svg" alt="/icons/calculator_lightgray.svg" width="40px" /> Backup purposes and software distribution media

</aside>

- フロッピーディスク
    
    記憶容量が1MB程度。
    
    ペラペラで耐久性も今ひとつ。
    
    世間で扱われるデータが大きくなるにつれて廃れていった。
    

↓

- 光磁気ディスクMagneto Optical Disk
    
    ほとんど見られなくなった。
    
    レーザ光線と磁気によってデータの読み書きを行う。
    
    フロッピーディスクの後継として一時は広く使われる。
    
    光ディスクの大容量低価格化の波に押され、見られなくなる。
    
    書く時：レーザ光線で記録面を熱してから、磁気を使って記録する。
    
    読む時：レーザ光線を使って読み取る。
    

↓

- 光ディスク
    
    セクタが螺旋状に並んでいる。ハードディスクとは異なる。
    
    レーザ光線でデータの読み書きを行う。
    
    **CD(Compact Disc)**
    
    - 音楽用のCDと同じディスクを、コンピュータの記憶媒体として利用したもの。
        - 直径12cm
        - 記憶容量650MB or 700MB
        - 安価で大容量
    - 再生産専用型
        - CD-ROM
            - CDビットいう微小な凹みが無数にあり、ここに製造段階でデータを記録。レーザ光線を照射すると、凹みのあるなしによって反射率が異なり、その作用でデータを読み込む。
    - 追記型
        - CD-R
            - 一度だけ書き込める。ディスクの記録層に有機色素が塗られており、これをレーザ光線で焦がしてビットを作ることで、データを記録する。
    - 書き換え可能型
        - CD-RW:
            - ディスクの記録層に相変化金属という材料を用い、これをレーザ光線の照射で結晶化・非結晶化させ、その違いによってデータを記録する。
    
    **DVD(Diigital Versatile Disc)**
    
    - 映像用のDVDと同じディスクを、コンピュータの記憶媒体として利用したもの。
        - 基本的な特徴はCDと同じ光ディスク。
        - 直径12cm
        - 記憶容量
            
            
            |  | 片面 | 両面 |
            | --- | --- | --- |
            | １層 | 4.7GB | 9.4GB |
            | ２層 | 8.5GB | 17GB |
    
    CDよりも波長の短い赤いレーザで記録するため、ビットの高密度化で可能
    
    - 再生専用型: 読むだけ
        - DVD-ROM
    - 追記型: 一回だけ記録できる
        - DVD-R
    - 書き換え可能型: 書き直しができる
        - DVD-RW:
        - DVD-RAM:
- 磁気テープ
    
    磁性体が塗布されたテープ状のフィルムに、磁気を使って読み書きを行うカセット型の記憶媒体が磁気テープ装置。
    
    アクセス速度は遅いが、容量が大きくて安価なので、バックアップ用途に使う。
    
    - ストリーマ
        
        ブロックごとにスタート・ストップせず、連続してデータの読み書きを行うもの。
        
    - Dat(Digital Audio Tape)
- メモリカード `PROM`
    
    `PROM`の一種を、補助記憶媒体に転用したもの。コンパクトかつ低価格。
    
    デジタルカメラ・携帯電話・データの持ち歩きに利用。
    
    - メモリカード
        
        SDカード
        
        メモリースティック
        
    - USBメモリ
        
        簡単便利