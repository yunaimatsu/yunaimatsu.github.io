---
layout: '@layout/Layout.astro'
---
# この記事を読むメリット
Python仮想環境の構成要素について全体像を理解できます。そもそも仮想環境とは仮想マシンのようにそれだけで新しい物理PCを用意するかのような技術であるため、Linuxを主とするOSの知識を深めることにも貢献します。実際にLinuxで手を動かしながら読んでみてください。

# 前提
- Pythonがインストールされている
- `pip`が使える
- `virtualenv`パッケージがインストールされている

# Python開発で、なぜ仮想環境を作るべきなのか
1. Pythonはパッケージ（追加でインストールするモジュール）が豊富→整理する必要があるため
1. Python自体が重いため

# 仮想環境の構築
これを実行します。
```
$ virtualenv my-virtualenv
```
`my-virtualenv`という名前の仮想環境を作ることができました。
```
$ ls
>> my-virtualenv
```
# `my-virtualenv`ディレクトリの構造
直下ディレクトリは以下のようになっています。本当に最低限の物だけを集めたような感じですね。
```
$ cd venv
$ ls -a
>> .
>> ..
>> .gitignore　# Git使用時のみ
>> bin
>> lib
>> pyvenv.cfg
```

ここから、それぞれのディレクトリについて階層に分けて詳細に確認していきます。

---
## 1. `.gitignore`
`.gitignore`ファイルは、Gitで管理している場合に自動で作成されます。`.`から始まる「隠しファイル」なので`ls -a`或いは`ls -A`で検索対象になります。Gitについては本題から逸れるため、以下の公式Docsを参照してください。

https://git-scm.com/docs/gitignore

## 2. `bin/`
"bin"は、binary(二進数の)という語の略称で、OSの実体とも言えるフォルダです。Python virtualenvのみならず、大抵のPCの上位階層に含まれています。主にOSに関わる実行可能"executable"な処理が書かれています。

`bin/`ディレクトリの中は以下のような感じになっているみたいです。
```
$ ls -a bin
>> .         activate.csh   activate.ps1      pip-3.10  python      wheel       wheel3.10
>> ..        activate.fish  activate_this.py  pip3      python3     wheel-3.10
>> activate  activate.nu    pip               pip3.10   python3.10  wheel3
```
初めは「なんか多くて大変そう」と思っていましたが、一つ一つ調べていたら、全くそんなことはありませんでした。2.1. `activate`, 2.2. `pip`, 2.3. `python`, 2.4. `wheel`の4つに分類できます。

### 2.1. `activate`

`activate`ファイルは拡張子がありません。これは、そもそもそれ自体がコマンドとしてOSにサポートされているからです。
　また、他の`activate.csh` `activate.fish` `activate.nu`　`activate.ps1` `activate_this.py` ファイルには、全て同じ処理が定義されています。各自で、実際にそれぞれのファイルの中をVS Codeで見てみてください。
以下のコマンドで見ることができます。ファイルの中身は（単に仮想環境を起動させるだけなので）簡素で短いです。
```
$ code <file-name>
```

### 2.2. `pip`
`pip`はPythonを使っている皆さんならお馴染みでしょう。`pip install <lib-name>`の`pip`です。パッケージをインストールしたり、管理したりします。
`pip`自体の詳細は以下のDocsを参照してください。

https://pip.pypa.io/en/stable/



### 2.3. `python`
`python`は我々が仮想環境で動かすPythonそのものです。`python` `python3` `python3.10` があります。
###### `python`
全てのバージョンのPythonに対応できます。実行する環境にインストールされているPythonのバージョンに対応します。基本的にはpython3を使うのが良いですが、python2の期間が相当長かったためにpython2にしか対応していない環境も十分にあり得ます。
###### `python3`
バージョン3.x以降のPythonが改めて入っています。が、実行する環境のバージョンに合わせて実行されます。
###### `python3.10`
2024年2月現在最新のPython3.10が改めて入っています。が、実行する環境に最新バージョンのPythonが入っていなければ上2つのどちらかが使われることになります。

### 2.4. `wheel`


# 【最後に】上級言語erもしっかりOS周りを理解しておこう
これは自戒も込めてなのですが、PythonをDjango等Web開発や数学/統計でしか使わないという方も、OS、仮想化技術、仮想環境を「手を動かして触る」週間をつけると、実際の開発で大いに役立ちます。実際のディレクトリ構造が頭に入っていると、「仮想"virtual"」という曖昧な概念語ではなく、きちんと実体があるファイル群としてそれらをイメージできるようになります。開発の合間に、関連があるPythonのDocsやパッケージの中の実際のコードを読む習慣をつけてみてはいかがでしょうか。

# この記事を書いた動機
> インストールしたライブラリ等がどこで保管or記録されているのか知りたかったためです。ネットで調べてもそれっぽいものは出てきたが、それらの記述はかなり雑に感じたし、手を動かして色々触ってみた方が理解も深まると考えました。